<!-- This is what I've learned so far from google chart's animation page https://is.gd/avOPIw  -->

<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
	
// Load the Visualization API and the corechart package.
google.charts.load('current', {'packages':['corechart']}); 
// probably should change this to 45 instead of 'current'
// Set a callback to run when the Google Visualization API is loaded.
google.charts.setOnLoadCallback(init);



function init() {
	var options = {
		width: 500,
		height: 500*.6,
		animation:{
			duration: 1000,
			easing: 'in',
		},
		vAxis: {minValue:0, maxValue:55},
		legend: {position: 'none'},
		title: 'Plurality',
		hAxis: {viewWindow: {max:4},
			textPosition: 'none' },
		fontName: 'Roboto',
		vAxis: { 
			textPosition: 'none' ,
			gridlines: {color: 'none'},
			baselineColor: 'none',
		},
		titleTextStyle: { // https://is.gd/TSjLsm
			fontSize: 20,
		}
	};
	var data = google.visualization.arrayToDataTable([
		['Candidate','Vote', {role:'style'}],
		['Clinton', 48.7,'black'],
		['Trump', 46.9,'black'],
		['Johnson', 3.3,'black'],
		['Stein', 1.1,'black'],
		['Sanders', 50,'black'],
		['Cruz',30,'black']
	])

	var view = new google.visualization.DataView(data);
      view.setColumns([0, 1,
                       { calc: "stringify",
                         sourceColumn: 0,
                         type: "string",
                         role: "annotation" },
                       2]);

	var chart = new google.visualization.ColumnChart(
		document.getElementById('chart_div'));
	var button = document.getElementById('b1');
	var button2 = document.getElementById('b2');
	var state = 'plurality';

	function drawChart() {
		chart.draw(view, options); 
	}


	var b_switcher = setInterval(function() { a_switch_plot(); }, 3000); 

	function d_set_switch_speed(e_interval) {
		clearInterval(b_switcher);
			b_switcher = setInterval(function() { a_switch_plot(); }, e_interval);
	}

	function a_switch_plot() {  // each state in order, with transition states
		switch(state)
		{
		case 'plurality':
			state = 'approval start';
			options['title'] = 'Approval';
			data.setValue(2, 2, 'red');
			data.setValue(3, 2, 'red');
			d_set_switch_speed(300);
			break;
		case 'approval start':
			state = 'approval';
			data.setValue(0, 1, 49.7);
			data.setValue(1, 1, 46.9);
			data.setValue(2, 1, 21.0);
			data.setValue(3, 1, 11.8);
			clearInterval(b_switcher);
			d_set_switch_speed(3000);
			break;
		case 'approval':
			state = 'approval with more start'
			options['title'] = 'Approval with Primary Contenders';
			data.setValue(2, 2, 'black');
			data.setValue(3, 2, 'black');
			data.setValue(4, 2, 'red');
			data.setValue(5, 2, 'red');
			d_set_switch_speed(300);
			break;
		case 'approval with more start':
			state = 'approval with more';
			options.hAxis.viewWindow.max = 6;
			d_set_switch_speed(3000);
			break;
		case 'approval with more':
			state = 'plurality start';
			options['title'] = 'Plurality';
			data.setValue(4, 2, 'black');
			data.setValue(5, 2, 'black');
			d_set_switch_speed(300);
			break;
		case 'plurality start':
			state = 'plurality';
			options.hAxis.viewWindow.max = 4;
			data.setValue(0, 1, 48.7);
			data.setValue(1, 1, 46.9);
			data.setValue(2, 1, 3.3);
			data.setValue(3, 1, 1.1);
			d_set_switch_speed(3000);
			break;
		}
		drawChart();
	}

	button.onclick = function() { b_switcher = setInterval(function() { a_switch_plot(); }, 3000); a_switch_plot(); }
	button2.onclick = function() {clearInterval(b_switcher);}

	drawChart();
}

    </script>
  </head>

  <body>
    <div id="chart_div"></div>
	<button id='b1'>play</button>
	<button id='b2'>stop</button>
	From <a href=https://docs.google.com/spreadsheets/d/1cmh5cm2W8lSOZ__BlS6Mzb_pto__EG5UU3BjNsXL5KY/edit#gid=1816975760>doc</a> but Sanders and Cruz were not there.
  </body>
</html>
